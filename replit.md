# StepGallery - Chrome Extension Project

## Overview
StepGallery is a professional Chrome Extension (Manifest V3) for intelligent image gallery detection, pagination, and export. This project provides a development environment for testing the extension and demonstrating its capabilities.

**Version:** 3.0.4  
**Type:** Chrome Extension + Python Dev Server  
**Purpose:** Government/Enterprise Distribution

## Project Structure

### Chrome Extension Files
- `manifest.json` - Extension configuration (Manifest V3)
- `background.js` - Service worker entry point
- `content-bundle.js` - Bundled content scripts (generated by build.py)
- `src/` - Source modules (background, content, shared utilities, UI)
- `offscreen/` - Offscreen worker for export processing
- `lib/` - Self-contained third-party libraries (PapaParse, SheetJS)
- `icons/` - Extension icons

### Development/Testing
- `server.py` - Python dev server (serves test pages on port 5000)
- `build.py` - Build script to bundle content scripts into content-bundle.js
- `index.html` - Landing page with project information
- `test-gallery.html` - Test gallery for extension testing
- `test-actionpress.html` - ActionPress style test
- `test-lazy-loading.html` - Lazy loading test page

### Documentation
- `README.md` - Comprehensive project documentation
- `Documents/` - Implementation details, testing guides, and technical documentation

## Setup & Usage

### Development Server
The Python dev server runs on port 5000 and serves:
- Landing page at `/`
- Test galleries for extension testing
- All static assets

**Command:** `python3 server.py`  
**Port:** 5000 (bound to 0.0.0.0)

### Building the Extension
Before using the extension or after modifying source files:
```bash
python3 build.py
```
This bundles all content script modules into `content-bundle.js`.

### Installing the Extension
1. Open Chrome and navigate to `chrome://extensions/`
2. Enable "Developer mode"
3. Click "Load unpacked"
4. Select this project directory
5. The extension should appear in your toolbar

### Testing
1. Start the dev server (automatically runs in Replit)
2. Open the webview to access test galleries
3. Click the StepGallery extension icon to open the side panel
4. Test features on the provided test galleries

## Key Features

- **Sequential Multi-Page Scraping** - Processes pages one at a time
- **Pause/Resume** - Checkpoint-based operation control
- **Adaptive Timing** - Dynamic wait times based on site response
- **Memory Monitoring** - Prevents crashes on large galleries
- **7 Pagination Methods** - Auto-detect, next button, load more, infinite scroll, arrow nav, URL patterns, API-based
- **CSV Export** - Customizable field selection
- **Batch Downloads** - Concurrent download management with custom filename patterns
- **Privacy-First** - No external calls, all processing local

## Technology Stack

- **Extension:** JavaScript (Manifest V3)
- **Build System:** Python 3.11
- **Dev Server:** Python HTTP server
- **Third-Party Libraries:** PapaParse (CSV), SheetJS (Excel)

## Recent Changes

**December 3, 2025** - Fixed UI Freeze Issue
- Fixed Chrome extension dashboard freezing on launch
- Added timeout-aware messaging helpers to prevent UI hangs
- Added global error handlers in background.js service worker
- Improved async error handling in MessageRouter
- Added defensive initialization in dashboard.js
- All messaging (runtime and tab) now has timeout protection

**December 2, 2025** - Initial Replit setup
- Installed Python 3.11
- Generated content-bundle.js via build script
- Configured dev server workflow on port 5000
- Added .gitignore for Python

## User Preferences
- (None recorded yet)

## Notes
- The dev server serves test pages for extension development
- The actual extension must be loaded in Chrome as an unpacked extension
- All extension functionality requires the Chrome Extensions API
- Test galleries demonstrate various pagination patterns
